<?xml version="1.0" encoding="UTF-8"?>
<wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
    <wsp:All wsp:Usage="Required">
        <L7p:SetVariable>
            <L7p:Base64Expression stringValue="NDA0"/>
            <L7p:VariableToSet stringValue="code"/>
        </L7p:SetVariable>
        <L7p:SetVariable>
            <L7p:Base64Expression stringValue="Tm90IEZvdW5k"/>
            <L7p:VariableToSet stringValue="description"/>
        </L7p:SetVariable>
        <L7p:SetVariable>
            <L7p:Base64Expression stringValue="U2VydmljaW8gbyByZWN1cnNvIG5vIGVuY29udHJhZG8="/>
            <L7p:VariableToSet stringValue="descriptionDetail"/>
        </L7p:SetVariable>
        <L7p:SetVariable>
            <L7p:Base64Expression stringValue="JHtyZXF1ZXN0LnRpbWUubG9jYWwueXl5eS9NTS9kZCdUJ0hIOm1tOnNzLlNTU30="/>
            <L7p:VariableToSet stringValue="responseTimestamp"/>
        </L7p:SetVariable>
        <L7p:AuditDetailAssertion>
            <L7p:CustomLoggerSuffix stringValue="entel.api.syslog"/>
            <L7p:Detail stringValue="IDTRANSACTION: ${requestId} SERVICE: ${httpRouting.url} LATENCY: ${httpRouting.latency} HTTP STATUS: ${httpRouting.reasonCode} DESCRIPTION: ${description} DESCRIPTION: ${descriptionDetail} CODE: ${code} BODY: ${httpRouting.reasonCode} REQUEST:${request}"/>
            <L7p:LoggingOnly booleanValue="true"/>
        </L7p:AuditDetailAssertion>
        <L7p:CustomizeErrorResponse>
            <L7p:Content stringValueReference="inline"><![CDATA[{
"result":{
	"transactionId":"${requestId}",
	"code":"${code}",
	"description":"${description}",
	"descriptionDetail":"${descriptionDetail}",
	"responseTimestamp":"${responseTimestamp}"
	}
}]]></L7p:Content>
            <L7p:ContentType stringValue="application/json; charset=UTF-8"/>
            <L7p:ExtraHeaders nameValuePairArray="included"/>
            <L7p:HttpStatus stringValue="404"/>
        </L7p:CustomizeErrorResponse>
        <L7p:RaiseError/>
    </wsp:All>
</wsp:Policy>