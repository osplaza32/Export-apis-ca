<?xml version="1.0" encoding="UTF-8"?>
<wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
    <wsp:All wsp:Usage="Required">
        <L7p:AuditDetailAssertion>
            <L7p:Detail stringValue="Policy Fragment: API Completed"/>
            <L7p:Enabled booleanValue="false"/>
            <L7p:LoggingOnly booleanValue="true"/>
        </L7p:AuditDetailAssertion>
        <L7p:AuditDetailAssertion>
            <L7p:CustomLoggerSuffix stringValue="trafficlog"/>
            <L7p:Detail stringValueReference="inline"><![CDATA[REQUESTID: ${requestId} | EVENTID: ${eventId} | APIM ${service.name} Completed | STATUS: ${response.http.status} | LATENCY: ${request.elapsedTime} | TIMESTAMP: ${request.time.local.yyyy-MM-dd'T'HH:mm:ss.SSS}
--
Response Header:
${response.http.allheadervalues}
--
Response Body:
${response.mainpart}]]></L7p:Detail>
            <L7p:LoggingOnly booleanValue="true"/>
        </L7p:AuditDetailAssertion>
    </wsp:All>
</wsp:Policy>