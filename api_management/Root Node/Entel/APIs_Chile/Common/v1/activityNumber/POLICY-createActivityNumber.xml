<?xml version="1.0" encoding="UTF-8"?>
<wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
    <wsp:All wsp:Usage="Required">
        <L7p:SetVariable>
            <L7p:Base64Expression stringValue="Y3JlYXRlQWN0aXZpdHlOdW1iZXI="/>
            <L7p:VariableToSet stringValue="policyAction"/>
        </L7p:SetVariable>
        <wsp:OneOrMore wsp:Usage="Required">
            <wsp:All wsp:Usage="Required">
                <wsp:OneOrMore wsp:Usage="Required">
                    <wsp:All wsp:Usage="Required">
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".contractType"/>
                            <L7p:VariablePrefix stringValue="contractType"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:ComparisonAssertion>
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:Expression1 stringValue="${contractType.result}"/>
                            <L7p:Operator operatorNull="null"/>
                            <L7p:Predicates predicates="included">
                                <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                </L7p:item>
                                <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:RightValue stringValue="0"/>
                                </L7p:item>
                            </L7p:Predicates>
                        </L7p:ComparisonAssertion>
                        <wsp:OneOrMore wsp:Usage="Required">
                            <wsp:All wsp:Usage="Required">
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtyZXF1ZXN0Lmh0dHAuaGVhZGVyLnJlcXVlc3RUaW1lc3RhbXB9"/>
                                    <L7p:VariableToSet stringValue="Timestamp"/>
                                </L7p:SetVariable>
                                <L7p:Regex>
                                    <L7p:AutoTarget booleanValue="false"/>
                                    <L7p:OtherTargetMessageVariable stringValue="Timestamp"/>
                                    <L7p:Regex stringValue="\-|T|\:|\."/>
                                    <L7p:RegexVar stringValue="Timestamp"/>
                                    <L7p:Replace booleanValue="true"/>
                                    <L7p:Replacement stringValue=""/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:Regex>
                                <L7p:Regex>
                                    <L7p:AutoTarget booleanValue="false"/>
                                    <L7p:CaptureVar stringValue="Timestamp"/>
                                    <L7p:OtherTargetMessageVariable stringValue="Timestamp"/>
                                    <L7p:Regex stringValue="^................."/>
                                    <L7p:Replacement stringValue=""/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:Regex>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".number"/>
                                    <L7p:VariablePrefix stringValue="number"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".type"/>
                                    <L7p:VariablePrefix stringValue="type"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".ID"/>
                                    <L7p:VariablePrefix stringValue="ID"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".stateReason"/>
                                    <L7p:VariablePrefix stringValue="stateReason"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="ew0KICAiUmVxdWVzdEhlYWRlciI6IHsNCiAgICAgICJDb25zdW1lciI6IHsNCiAgICAgICAgICJzeXNDb2RlIjogIiR7cmVxdWVzdC5odHRwLmhlYWRlci5hcHBsaWNhdGlvbkNvZGV9IiwNCiAgICAgICAgICJlbnRlcnByaXNlQ29kZSI6ICJFTlRFTC1QRVIiLA0KICAgICAgICAgImNvdW50cnlDb2RlIjogIiR7cmVxdWVzdC5odHRwLmhlYWRlci5jb3VudHJ5Q29kZX0iDQogICAgICB9LA0KICAgICAgIlRyYWNlIjogew0KICAgICAgICAgImNsaWVudFJlcVRpbWVzdGFtcCI6ICIke3JlcXVlc3QuaHR0cC5oZWFkZXIucmVxdWVzdFRpbWVzdGFtcH0iLA0KICAgICAgICAgInByb2Nlc3NJRCI6ICJDTlNUREVUQ09OU1VNTyIsDQogICAgICAgICAiZXZlbnRJRCI6ICIwMjE1U0FTUzEwMDA0MyR7VGltZXN0YW1wfTAwMDAwMDAyMzQ1NjcyMjIiDQogICAgICB9LA0KICAgICAgIkNoYW5uZWwiOiB7DQoJCQkibmFtZSI6ICJNYXlvcmlzdGFzIiwNCgkJCSJtb2RlIjogIlByZXNlbmNpYWwiDQoJCX0NCiAgfSwNCiAgIkJvZHkiOiANCiB7DQoJCSJTZXJ2aWNlUmVxdWVzdCI6IHsNCgkJCSJzdGF0ZVJlYXNvbiI6ICIke3N0YXRlUmVhc29uLnJlc3VsdH0iLA0KCQkJIkFjdGl2aXR5Ijogew0KCQkJCSJyZXN1bHQiOiAiVsOhbGlkbyIsDQoJCQkJInN0YXR1cyI6ICJDZXJyYWRvIiwNCgkJCQkidHlwZSI6ICJWYWxpZGFjacOzbiBCaW9tw6l0cmljYSINCgkJCX0sDQoJCQkiYXJlYSI6ICJBY3RpdmFjacOzbiBkZSBMw61uZWEiLA0KCQkJInN1YkFyZWEiOiAiTcOzdmlsIC0gUHJlcGFnbyIsDQoJCQkiSUQiOiAiJHtJRC5yZXN1bHR9IiwNCgkJCSJjaGFuZWxJbiI6ICJUREVfQVBNX1ZBTCIsDQoJCQkiSW5kaXZpZHVhbElkZW50aWZpY2F0aW9uIjogew0KCQkJCSJudW1iZXIiOiAiJHtudW1iZXIucmVzdWx0fSIsDQoJCQkJInR5cGUiOiAiJHt0eXBlLnJlc3VsdH0iDQoJCQl9LA0KCQkJInR5cGUiOiAiT3JkZW4iDQoJCX0NCn0NCn0="/>
                                    <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="jsonRequest"/>
                                </L7p:SetVariable>
                                <L7p:HttpRoutingAssertion>
                                    <L7p:FailOnErrorStatus booleanValue="false"/>
                                    <L7p:HttpMethod httpMethod="POST"/>
                                    <L7p:ProtectedServiceUrl stringValue="http://${gateway.eUSB.hostname}/ES/SIF/ServiceRequestActivity_SIF/Create"/>
                                    <L7p:ProxyPassword stringValueNull="null"/>
                                    <L7p:ProxyUsername stringValueNull="null"/>
                                    <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:RequestHeaderRules>
                                    <L7p:RequestMsgSrc stringValue="jsonRequest"/>
                                    <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                    </L7p:RequestParamRules>
                                    <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:ResponseHeaderRules>
                                    <L7p:ResponseMsgDest stringValue="serviceResponse"/>
                                </L7p:HttpRoutingAssertion>
                                <L7p:ComparisonAssertion>
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Expression1 stringValue="${httpRouting.reasonCode}"/>
                                    <L7p:Expression2 stringValue="200"/>
                                    <L7p:Predicates predicates="included">
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:RightValue stringValue="200"/>
                                    </L7p:item>
                                    </L7p:Predicates>
                                </L7p:ComparisonAssertion>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtzZXJ2aWNlUmVzcG9uc2UubWFpbnBhcnR9"/>
                                    <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="jsonResponse"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtyZXF1ZXN0LnRpbWUubG9jYWwueXl5eS1NTS1kZCdUJ0hIOm1tOnNzLlNTU30="/>
                                    <L7p:VariableToSet stringValue="responseTimestamp"/>
                                </L7p:SetVariable>
                                <wsp:OneOrMore wsp:Usage="Required">
                                    <wsp:All wsp:Usage="Required">
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue="$.Body"/>

                                    <L7p:OtherTargetMessageVariable stringValue="serviceResponse"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="body"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtib2R5LnJlc3VsdH0="/>
                                    <L7p:VariableToSet stringValue="rBody"/>
                                    </L7p:SetVariable>
                                    <L7p:Regex>
                                    <L7p:AutoTarget booleanValue="false"/>

                                    <L7p:OtherTargetMessageVariable stringValue="rBody"/>
                                    <L7p:Regex stringValue="^\{|\}$"/>
                                    <L7p:Replace booleanValue="true"/>
                                    <L7p:Replacement stringValue=""/>
                                    <L7p:Target target="OTHER"/>
                                    </L7p:Regex>
                                    <L7p:HardcodedResponse>
                                    <L7p:Base64ResponseBody stringValue="ewogICJyZXN1bHQiOiB7CgkidHJhbnNhY3Rpb25JZCI6ICAiJHtyZXF1ZXN0SWR9IiwKICAgICJjb2RlIjogIiR7aHR0cFJvdXRpbmcucmVhc29uQ29kZX0iLAogICAgImRlc2NyaXB0aW9uIjogIk9LIiwKICAgICJkZXNjcmlwdGlvbkRldGFpbCI6ICJQcm9jZXNhbWllbnRvIGNvbmNsdWlkbyBleGl0b3NhbWVudGUiLAogICAgInJlc3BvbnNlVGltZXN0YW1wIjogIiR7cmVzcG9uc2VUaW1lc3RhbXB9IgoKICB9LAoke3JCb2R5fQp9"/>
                                    <L7p:ResponseContentType stringValue="application/json; charset=UTF-8"/>
                                    </L7p:HardcodedResponse>
                                    </wsp:All>
                                    <wsp:All wsp:Usage="Required">
                                    <L7p:HardcodedResponse>
                                    <L7p:Base64ResponseBody stringValue="ewogICJyZXN1bHQiOiB7CgkidHJhbnNhY3Rpb25JZCI6ICAiJHtyZXF1ZXN0SWR9IiwKICAgICJjb2RlIjogIiR7aHR0cFJvdXRpbmcucmVhc29uQ29kZX0iLAogICAgImRlc2NyaXB0aW9uIjogIk9LIiwKICAgICJkZXNjcmlwdGlvbkRldGFpbCI6ICJQcm9jZXNhbWllbnRvIGNvbmNsdWlkbyBleGl0b3NhbWVudGUiLAogICAgInJlc3BvbnNlVGltZXN0YW1wIjogIiR7cmVzcG9uc2VUaW1lc3RhbXB9IgogICAgCiAgfQp9"/>
                                    <L7p:ResponseContentType stringValue="application/json; charset=UTF-8"/>
                                    </L7p:HardcodedResponse>
                                    </wsp:All>
                                </wsp:OneOrMore>
                            </wsp:All>
                            <wsp:All wsp:Usage="Required">
                                <L7p:ComparisonAssertion>
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Expression1 stringValue="${httpRouting.reasonCode}"/>
                                    <L7p:Operator operatorNull="null"/>
                                    <L7p:Predicates predicates="included">
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Negated booleanValue="true"/>
                                    <L7p:RightValue stringValue="-1"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Negated booleanValue="true"/>
                                    <L7p:RightValue stringValue="-2"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Negated booleanValue="true"/>
                                    <L7p:RightValue stringValue="-3"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Negated booleanValue="true"/>
                                    <L7p:RightValue stringValue="-4"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Negated booleanValue="true"/>
                                    <L7p:RightValue stringValue="-5"/>
                                    </L7p:item>
                                    </L7p:Predicates>
                                </L7p:ComparisonAssertion>
                                <L7p:Encapsulated>
                                    <L7p:EncapsulatedAssertionConfigGuid stringValue="14295f18-da19-4f0e-9643-a8c30b3544dc"/>
                                    <L7p:EncapsulatedAssertionConfigName stringValue="CodeStatus"/>
                                </L7p:Encapsulated>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtodHRwUm91dGluZy5yZWFzb25Db2RlfQ=="/>
                                    <L7p:VariableToSet stringValue="code"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="NDIy"/>
                                    <L7p:VariableToSet stringValue="httpCode"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtjb2RlRGVzY3JpcHRpb259"/>
                                    <L7p:VariableToSet stringValue="description"/>
                                </L7p:SetVariable>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".SourceError.description"/>
                                    <L7p:OtherTargetMessageVariable stringValue="serviceResponse"/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtqc29uUGF0aC5yZXN1bHR9"/>
                                    <L7p:VariableToSet stringValue="descriptionDetail"/>
                                </L7p:SetVariable>
                                <L7p:RaiseError/>
                            </wsp:All>
                            <L7p:Include>
                                <L7p:PolicyGuid stringValue="4149a5c9-f2a5-45cf-ac36-02202909301f"/>
                            </L7p:Include>
                        </wsp:OneOrMore>
                    </wsp:All>
                    <wsp:All wsp:Usage="Required">
                        <L7p:ComparisonAssertion>
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:Expression1 stringValue="${contractType.result}"/>
                            <L7p:Operator operatorNull="null"/>
                            <L7p:Predicates predicates="included">
                                <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                </L7p:item>
                                <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:RightValue stringValue="1"/>
                                </L7p:item>
                            </L7p:Predicates>
                        </L7p:ComparisonAssertion>
                        <wsp:OneOrMore wsp:Usage="Required">
                            <wsp:All wsp:Usage="Required">
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".number"/>
                                    <L7p:VariablePrefix stringValue="Numero"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".type"/>
                                    <L7p:VariablePrefix stringValue="tipoDoc"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="ew0KICAgImhlYWRlciI6ew0KICAgICAgImNhbmFsIjoiTWF5b3Jpc3RhcyIsDQogICAgICAiaWRBcGxpY2FjaW9uIjoxMjMsDQogICAgICAidXN1YXJpbyI6InVzZXIxIiwNCiAgICAgICJpZFRyYW5zYWNjaW9uRVNCIjoiMTIzIiwNCiAgICAgICJpZFRyYW5zYWNjaW9uTmVnb2NpbyI6IjEyMyIsDQogICAgICAiZmVjaGFJbmljaW8iOiIke3JlcXVlc3QudGltZS5pc284NjAxfSIsDQogICAgICAibm9kb0FkaWNpb25hbCI6IjEyMyINCiAgIH0sDQogICAiYm9keSI6eyANCiAgIAkibnVtZXJvRG9jdW1lbnRvIjogIiR7TnVtZXJvLnJlc3VsdH0iLA0KICAgCSJ0aXBvRG9jdW1lbnRvIjogIiR7dGlwb0RvYy5yZXN1bHR9Ig0KICAgCSAgIH0NCg0KfQ=="/>
                                    <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="jsonRequest1"/>
                                </L7p:SetVariable>
                                <L7p:HttpRoutingAssertion>
                                    <L7p:FailOnErrorStatus booleanValue="false"/>
                                    <L7p:HttpMethod httpMethod="POST"/>
                                    <L7p:ProtectedServiceUrl stringValue="http://${gateway.legado.pe.hostname}/AppMayorista/v2/gestionCliente/validarCliente"/>
                                    <L7p:ProxyPassword stringValueNull="null"/>
                                    <L7p:ProxyUsername stringValueNull="null"/>
                                    <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:RequestHeaderRules>
                                    <L7p:RequestMsgSrc stringValue="jsonRequest1"/>
                                    <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                    </L7p:RequestParamRules>
                                    <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:ResponseHeaderRules>
                                    <L7p:ResponseMsgDest stringValue="serviceResponse1"/>
                                </L7p:HttpRoutingAssertion>
                                <wsp:OneOrMore wsp:Usage="Required">
                                    <wsp:All wsp:Usage="Required">
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".idCliente"/>

                                    <L7p:OtherTargetMessageVariable stringValue="serviceResponse1"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="idCliente"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    </wsp:All>
                                    <wsp:All wsp:Usage="Required">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="MA=="/>
                                    <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="idCliente"/>
                                    </L7p:SetVariable>
                                    </wsp:All>
                                </wsp:OneOrMore>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".phoneNumber"/>
                                    <L7p:VariablePrefix stringValue="phoneNumber"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".origin"/>
                                    <L7p:VariablePrefix stringValue="origin"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".codeErrActivationCHIP3G"/>
                                    <L7p:VariablePrefix stringValue="codeErr"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="ew0KICAgImhlYWRlciI6ew0KICAgICAgImNhbmFsIjoiTWF5b3Jpc3RhcyIsDQogICAgICAiaWRBcGxpY2FjaW9uIjoxMjMsDQogICAgICAidXN1YXJpbyI6InVzZXIxIiwNCiAgICAgICJpZFRyYW5zYWNjaW9uRVNCIjoiUE9SNTE4MiIsDQogICAgICAiaWRUcmFuc2FjY2lvbk5lZ29jaW8iOiJQT1I1MTgyIiwNCiAgICAgICJmZWNoYUluaWNpbyI6IiR7cmVxdWVzdC50aW1lLmlzbzg2MDF9IiwgICAgDQogICAgICAibm9kb0FkaWNpb25hbCI6IjEyMyINCiAgIH0sDQogICAiYm9keSI6eyANCiAgIAkiY29kaWdvQ2xpZW50ZSI6ICIke2lkQ0xpZW50ZS5yZXN1bHR9IiwNCiAgIAkibnVtZXJvVGVsZWZvbm8iOiAiJHtwaG9uZU51bWJlci5yZXN1bHR9IiwNCiAgIAkib3JpZ2VuIjogIiR7b3JpZ2luLnJlc3VsdH0iLA0KICAgCSJjb2RpZ29BY3RpdmFjaW9uRXJyb3IiOiAiJHtjb2RlRXJyLnJlc3VsdH0iDQogICB9DQoNCn0="/>
                                    <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="jsonRequest"/>
                                </L7p:SetVariable>
                                <L7p:HttpRoutingAssertion>
                                    <L7p:FailOnErrorStatus booleanValue="false"/>
                                    <L7p:HttpMethod httpMethod="POST"/>
                                    <L7p:ProtectedServiceUrl stringValue="http://${gateway.legado.pe.hostname}/AppMayorista/v3/gestionIncidente/crearIncidente"/>
                                    <L7p:ProxyPassword stringValueNull="null"/>
                                    <L7p:ProxyUsername stringValueNull="null"/>
                                    <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                    </L7p:item>
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:RequestHeaderRules>
                                    <L7p:RequestMsgSrc stringValue="jsonRequest"/>
                                    <L7p:RequestParamRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included"/>
                                    </L7p:RequestParamRules>
                                    <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                                    <L7p:ForwardAll booleanValue="true"/>
                                    <L7p:Rules httpPassthroughRules="included">
                                    <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                    </L7p:item>
                                    </L7p:Rules>
                                    </L7p:ResponseHeaderRules>
                                    <L7p:ResponseMsgDest stringValue="serviceResponse"/>
                                </L7p:HttpRoutingAssertion>
                                <L7p:ComparisonAssertion>
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Expression1 stringValue="${httpRouting.reasonCode}"/>
                                    <L7p:Expression2 stringValue="200"/>
                                    <L7p:Predicates predicates="included">
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:RightValue stringValue="200"/>
                                    </L7p:item>
                                    </L7p:Predicates>
                                </L7p:ComparisonAssertion>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".body.responseStatus.estado"/>
                                    <L7p:OtherTargetMessageVariable stringValue="serviceResponse"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="estado"/>
                                </L7p:EvaluateJsonPathExpression>
                                <wsp:OneOrMore wsp:Usage="Required">
                                    <wsp:All wsp:Usage="Required">
                                    <L7p:ComparisonAssertion>
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Expression1 stringValue="${estado.result}"/>
                                    <L7p:Operator operatorNull="null"/>
                                    <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="string"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:RightValue stringValue="0"/>
                                    </L7p:item>
                                    </L7p:Predicates>
                                    </L7p:ComparisonAssertion>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtyZXF1ZXN0LnRpbWUubG9jYWwueXl5eS1NTS1kZCdUJ0hIOm1tOnNzLlNTU30="/>
                                    <L7p:VariableToSet stringValue="responseTimestamp"/>
                                    </L7p:SetVariable>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".responseData.idIncidente"/>

                                    <L7p:OtherTargetMessageVariable stringValue="serviceResponse"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="idIncidente"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="ew0KInJlc3VsdCI6ew0KCSJ0cmFuc2FjdGlvbklkIjoiJHtyZXF1ZXN0SWR9IiwNCgkiY29kZSI6IjIwMCIsDQoJImRlc2NyaXB0aW9uIjoiT0siLA0KCSJkZXNjcmlwdGlvbkRldGFpbCI6IlByb2Nlc2FtaWVudG8gY29uY2x1w61kbyBleGl0b3NhbWVudGUiLA0KCSJyZXNwb25zZVRpbWVzdGFtcCI6IiR7cmVzcG9uc2VUaW1lc3RhbXB9Ig0KCX0sDQoJImlkSW5jaWRlbnRlIjogIiR7aWRJbmNpZGVudGUucmVzdWx0fSINCn0="/>
                                    <L7p:VariableToSet stringValue="serviceResponse"/>
                                    </L7p:SetVariable>
                                    <L7p:HardcodedResponse>
                                    <L7p:Base64ResponseBody stringValue="JHtzZXJ2aWNlUmVzcG9uc2V9"/>
                                    <L7p:ResponseContentType stringValue="application/json; charset=UTF-8"/>
                                    </L7p:HardcodedResponse>
                                    </wsp:All>
                                    <wsp:All wsp:Usage="Required">
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".responseStatus.descripcionRespuesta"/>

                                    <L7p:OtherTargetMessageVariable stringValue="serviceResponse"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="details"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="NDIy"/>
                                    <L7p:VariableToSet stringValue="code"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="NTAw"/>
                                    <L7p:VariableToSet stringValue="httpCode"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="RXJyb3IgZGUgTmVnb2Npbw=="/>
                                    <L7p:VariableToSet stringValue="description"/>
                                    </L7p:SetVariable>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtkZXRhaWxzLnJlc3VsdH0="/>
                                    <L7p:VariableToSet stringValue="descriptionDetail"/>
                                    </L7p:SetVariable>
                                    <L7p:RaiseError/>
                                    </wsp:All>
                                </wsp:OneOrMore>
                            </wsp:All>
                            <wsp:All wsp:Usage="Required">
                                <L7p:Encapsulated>
                                    <L7p:EncapsulatedAssertionConfigGuid stringValue="14295f18-da19-4f0e-9643-a8c30b3544dc"/>
                                    <L7p:EncapsulatedAssertionConfigName stringValue="CodeStatus"/>
                                </L7p:Encapsulated>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtodHRwUm91dGluZy5yZWFzb25Db2RlfQ=="/>
                                    <L7p:VariableToSet stringValue="code"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="NTAw"/>
                                    <L7p:VariableToSet stringValue="httpCode"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtjb2RlRGVzY3JpcHRpb259"/>
                                    <L7p:VariableToSet stringValue="description"/>
                                </L7p:SetVariable>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".SourceError.ErrorSourceDetails.details"/>
                                    <L7p:OtherTargetMessageVariable stringValue="serviceResponse"/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtqc29uUGF0aC5yZXN1bHR9"/>
                                    <L7p:VariableToSet stringValue="descriptionDetail"/>
                                </L7p:SetVariable>
                                <L7p:RaiseError/>
                            </wsp:All>
                            <L7p:Include>
                                <L7p:PolicyGuid stringValue="4149a5c9-f2a5-45cf-ac36-02202909301f"/>
                            </L7p:Include>
                        </wsp:OneOrMore>
                    </wsp:All>
                    <wsp:All wsp:Usage="Required">
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="NDAw"/>
                            <L7p:VariableToSet stringValue="code"/>
                        </L7p:SetVariable>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="NDAw"/>
                            <L7p:VariableToSet stringValue="httpCode"/>
                        </L7p:SetVariable>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="UGV0aWNpw7NuIGluY29ycmVjdGE="/>
                            <L7p:VariableToSet stringValue="description"/>
                        </L7p:SetVariable>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="TGEgc29saWNpdHVkIGNvbnRpZW5lIHNpbnRheGlzIGVycsOzbmVhIHkgbm8gZGViZXLDrWEgcmVwZXRpcnNlLg=="/>
                            <L7p:VariableToSet stringValue="descriptionDetail"/>
                        </L7p:SetVariable>
                        <L7p:RaiseError/>
                    </wsp:All>
                </wsp:OneOrMore>
            </wsp:All>
            <L7p:Include>
                <L7p:PolicyGuid stringValue="4149a5c9-f2a5-45cf-ac36-02202909301f"/>
            </L7p:Include>
        </wsp:OneOrMore>
    </wsp:All>
</wsp:Policy>