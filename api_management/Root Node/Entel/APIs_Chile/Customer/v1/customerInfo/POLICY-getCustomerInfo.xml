<?xml version="1.0" encoding="UTF-8"?>
<wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
    <wsp:All wsp:Usage="Required">
        <L7p:SetVariable>
            <L7p:Base64Expression stringValue="JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLm1zaXNkbn0="/>
            <L7p:VariableToSet stringValue="msisdn"/>
        </L7p:SetVariable>
        <L7p:SetVariable>
            <L7p:Base64Expression stringValue="JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLm51bWJlcn0="/>
            <L7p:VariableToSet stringValue="number"/>
        </L7p:SetVariable>
        <L7p:SetVariable>
            <L7p:Base64Expression stringValue="JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLnR5cGV9"/>
            <L7p:VariableToSet stringValue="type"/>
        </L7p:SetVariable>
        <wsp:OneOrMore wsp:Usage="Required">
            <wsp:All wsp:Usage="Required">
                <L7p:ComparisonAssertion>
                    <L7p:CaseSensitive booleanValue="false"/>
                    <L7p:Expression1 stringValue="${msisdn}"/>
                    <L7p:Expression2 stringValue=""/>
                    <L7p:Operator operator="EMPTY"/>
                    <L7p:Predicates predicates="included">
                        <L7p:item binary="included">
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:Operator operator="EMPTY"/>
                            <L7p:RightValue stringValue=""/>
                        </L7p:item>
                    </L7p:Predicates>
                </L7p:ComparisonAssertion>
                <L7p:ComparisonAssertion>
                    <L7p:CaseSensitive booleanValue="false"/>
                    <L7p:Expression1 stringValue="${number}"/>
                    <L7p:Expression2 stringValue=""/>
                    <L7p:Operator operator="EMPTY"/>
                    <L7p:Predicates predicates="included">
                        <L7p:item binary="included">
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:Operator operator="EMPTY"/>
                            <L7p:RightValue stringValue=""/>
                        </L7p:item>
                    </L7p:Predicates>
                </L7p:ComparisonAssertion>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="NDAw"/>
                    <L7p:VariableToSet stringValue="code"/>
                </L7p:SetVariable>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="UGV0aWNpb24gaW5jb3JyZWN0YQ=="/>
                    <L7p:VariableToSet stringValue="description"/>
                </L7p:SetVariable>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="SW5ncmVzYXIgTVNJU0ROIG8gbnVtZXJvIGRlIGRvY3VtZW50bw=="/>
                    <L7p:VariableToSet stringValue="descriptionDetail"/>
                </L7p:SetVariable>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="NDAw"/>
                    <L7p:VariableToSet stringValue="httpCode"/>
                </L7p:SetVariable>
                <L7p:Encapsulated>
                    <L7p:EncapsulatedAssertionConfigGuid stringValue="2873d7c1-bfb2-42b8-ab9a-35767965de80"/>
                    <L7p:EncapsulatedAssertionConfigName stringValue="API Portal Integration - Post Route"/>
                    <L7p:Parameters mapValue="included">
                        <L7p:entry>
                            <L7p:key stringValue="portal.analytics.response.code"/>
                            <L7p:value stringValue="400"/>
                        </L7p:entry>
                        <L7p:entry>
                            <L7p:key stringValue="portal.analytics.routingTotalTime"/>
                            <L7p:value stringValue="${assertion.latency.ms}"/>
                        </L7p:entry>
                    </L7p:Parameters>
                </L7p:Encapsulated>
                <L7p:RaiseError/>
            </wsp:All>
            <wsp:All wsp:Usage="Required">
                <L7p:ComparisonAssertion>
                    <L7p:CaseSensitive booleanValue="false"/>
                    <L7p:Expression1 stringValue="${number}"/>
                    <L7p:Expression2 stringValue=""/>
                    <L7p:Negate booleanValue="true"/>
                    <L7p:Operator operator="EMPTY"/>
                    <L7p:Predicates predicates="included">
                        <L7p:item binary="included">
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:Negated booleanValue="true"/>
                            <L7p:Operator operator="EMPTY"/>
                            <L7p:RightValue stringValue=""/>
                        </L7p:item>
                    </L7p:Predicates>
                </L7p:ComparisonAssertion>
                <L7p:ComparisonAssertion>
                    <L7p:CaseSensitive booleanValue="false"/>
                    <L7p:Expression1 stringValue="${type}"/>
                    <L7p:Expression2 stringValue=""/>
                    <L7p:Operator operator="EMPTY"/>
                    <L7p:Predicates predicates="included">
                        <L7p:item binary="included">
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:Operator operator="EMPTY"/>
                            <L7p:RightValue stringValue=""/>
                        </L7p:item>
                    </L7p:Predicates>
                </L7p:ComparisonAssertion>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="NDAw"/>
                    <L7p:VariableToSet stringValue="code"/>
                </L7p:SetVariable>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="UGV0aWNpb24gaW5jb3JyZWN0YQ=="/>
                    <L7p:VariableToSet stringValue="description"/>
                </L7p:SetVariable>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="SW5ncmVzYXIgdGlwbyBkZSBkb2N1bWVudG8="/>
                    <L7p:VariableToSet stringValue="descriptionDetail"/>
                </L7p:SetVariable>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="NDAw"/>
                    <L7p:VariableToSet stringValue="httpCode"/>
                </L7p:SetVariable>
                <L7p:Encapsulated>
                    <L7p:EncapsulatedAssertionConfigGuid stringValue="2873d7c1-bfb2-42b8-ab9a-35767965de80"/>
                    <L7p:EncapsulatedAssertionConfigName stringValue="API Portal Integration - Post Route"/>
                    <L7p:Parameters mapValue="included">
                        <L7p:entry>
                            <L7p:key stringValue="portal.analytics.response.code"/>
                            <L7p:value stringValue="400"/>
                        </L7p:entry>
                        <L7p:entry>
                            <L7p:key stringValue="portal.analytics.routingTotalTime"/>
                            <L7p:value stringValue="${assertion.latency.ms}"/>
                        </L7p:entry>
                    </L7p:Parameters>
                </L7p:Encapsulated>
                <L7p:RaiseError/>
            </wsp:All>
            <wsp:All wsp:Usage="Required">
                <wsp:OneOrMore wsp:Usage="Required">
                    <wsp:All wsp:Usage="Required">
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="U0VMRUNUIENJLkJBVENIX0lELA0KICAgICAgICBDSS5SRVNPVVJDRV9UWVBFLA0KICAgICAgICBDSS5SRVNPVVJDRV9JRCwNCiAgICAgICAgQ0kuRE9DVU1FTlRfVFlQRSwNCiAgICAgICAgQ0kuRE9DVU1FTlRfSUQsDQogICAgICAgIENJLlNVQlNDUklQVElPTl9JRCwNCiAgICAgICAgQ0kuQ1VTVE9NRVJfSUQsDQogICAgICAgIENJLlNUQVRFLA0KICAgICAgICBDSS5TVEFURV9USU1FU1RBTVAsDQogICAgICAgIENJLlRJUE9fUExBTiwNCiAgICAgICAgQ0kuQklMTElOR19BQ0NPVU5UX0NPREUNCiAgICAgIEZST00gT0RTX1RCTEVfQ1VTVF9JTkZPIENJDQogICAgICBXSEVSRSAoQ0kuUkVTT1VSQ0VfSUQgPSAnJHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLm1zaXNkbn0nKQ0KICAgICAgT1IgKChDSS5ET0NVTUVOVF9UWVBFID0gJyR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci50eXBlfScpDQogICAgICBBTkQgKENJLkRPQ1VNRU5UX0lEID0gJyR7cmVxdWVzdC5odHRwLnBhcmFtZXRlci5udW1iZXJ9Jykp"/>
                            <L7p:VariableToSet stringValue="queryRequest"/>
                        </L7p:SetVariable>
                        <L7p:JdbcQuery>
                            <L7p:AssertionFailureEnabled booleanValue="false"/>
                            <L7p:ConnectionName stringValue="MigrationInfoODS"/>
                            <L7p:ConvertVariablesToStrings booleanValue="false"/>
                            <L7p:GenerateXmlResult booleanValue="true"/>
                            <L7p:MaxRecords intValue="100"/>
                            <L7p:SqlQuery stringValueReference="inline"><![CDATA[SELECT CI.BATCH_ID,
        CI.RESOURCE_TYPE,
        CI.RESOURCE_ID,
        CI.DOCUMENT_TYPE,
        CI.DOCUMENT_ID,
        CI.SUBSCRIPTION_ID,
        CI.CUSTOMER_ID,
        CI.STATE,
        CI.STATE_TIMESTAMP,
        CI.TIPO_PLAN,
        CI.BILLING_ACCOUNT_CODE
      FROM ODS_TBLE_CUST_INFO CI
      WHERE (CI.RESOURCE_ID = ${request.http.parameter.msisdn})
      OR ((CI.DOCUMENT_TYPE = ${request.http.parameter.type})
      AND (CI.DOCUMENT_ID = ${request.http.parameter.number}))]]></L7p:SqlQuery>
                        </L7p:JdbcQuery>
                        <wsp:OneOrMore wsp:Usage="Required">
                            <wsp:All wsp:Usage="Required">
                                <L7p:ComparisonAssertion>
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:Expression1 stringValue="${jdbcQuery.queryresult.count}"/>
                                    <L7p:Operator operatorNull="null"/>
                                    <L7p:Predicates predicates="included">
                                    <L7p:item dataType="included">
                                    <L7p:Type variableDataType="int"/>
                                    </L7p:item>
                                    <L7p:item binary="included">
                                    <L7p:CaseSensitive booleanValue="false"/>
                                    <L7p:RightValue stringValue="0"/>
                                    </L7p:item>
                                    </L7p:Predicates>
                                </L7p:ComparisonAssertion>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtyZXF1ZXN0LnRpbWUubG9jYWwueXl5eS1NTS1kZCdUJ0hIOm1tOnNzLlNTU30="/>
                                    <L7p:VariableToSet stringValue="responseTimestamp"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="MjAw"/>
                                    <L7p:VariableToSet stringValue="code"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="T0s="/>
                                    <L7p:VariableToSet stringValue="description"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="Q3VlbnRhIG5vIGVuY29udHJhZGE="/>
                                    <L7p:VariableToSet stringValue="descriptionDetail"/>
                                </L7p:SetVariable>
                                <L7p:HardcodedResponse>
                                    <L7p:Base64ResponseBody stringValue="ewoicmVzdWx0Ijp7CgkidHJhbnNhY3Rpb25JZCI6IiR7cmVxdWVzdElkfSIsCgkiY29kZSI6IiR7Y29kZX0iLAoJImRlc2NyaXB0aW9uIjoiJHtkZXNjcmlwdGlvbn0iLAoJImRlc2NyaXB0aW9uRGV0YWlsIjoiJHtkZXNjcmlwdGlvbkRldGFpbH0iLAoJInJlc3BvbnNlVGltZXN0YW1wIjoiJHtyZXNwb25zZVRpbWVzdGFtcH0iCgl9Cn0="/>
                                    <L7p:ResponseContentType stringValue="application/json; charset=UTF-8"/>
                                </L7p:HardcodedResponse>
                            </wsp:All>
                            <wsp:All wsp:Usage="Required">
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtqZGJjUXVlcnkueG1sUmVzdWx0fQ=="/>
                                    <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="jdbcQuery.xmlResult"/>
                                </L7p:SetVariable>
                                <L7p:XslTransformation>
                                    <L7p:Direction intValue="-1"/>
                                    <L7p:OtherTargetMessageVariable stringValue="jdbcQuery.xmlResult"/>
                                    <L7p:ResourceInfo staticResourceInfo="included">
                                    <L7p:Document stringValueReference="inline"><![CDATA[<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <!--empty template suppresses this attribute-->
    <xsl:template match="@type"/>
    <!--identity template copies everything forward by default-->
    <xsl:template match="@*|node()">
        <xsl:copy>
            <xsl:apply-templates select="@*|node()"/>
        </xsl:copy>
    </xsl:template>
</xsl:stylesheet>]]></L7p:Document>
                                    </L7p:ResourceInfo>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:TransformName stringValue=""/>
                                    <L7p:XsltVersion stringValue="1.0"/>
                                </L7p:XslTransformation>
                                <L7p:XslTransformation>
                                    <L7p:Direction intValue="-1"/>
                                    <L7p:OtherTargetMessageVariable stringValue="jdbcQuery.xmlResult"/>
                                    <L7p:ResourceInfo staticResourceInfo="included">
                                    <L7p:Document stringValueReference="inline"><![CDATA[<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output indent="yes" method="xml"/>
  <xsl:template match="*">
    <xsl:element name="{local-name(.)}">
      <xsl:apply-templates select="@* | node()"/>
    </xsl:element>
  </xsl:template>
  <xsl:template match="@*">
    <xsl:attribute name="{local-name(.)}">
      <xsl:value-of select="."/>
    </xsl:attribute>
  </xsl:template>
   <xsl:template match="text() | comment() | processing-instruction()">
        <xsl:copy/>
   </xsl:template>
</xsl:stylesheet>]]></L7p:Document>
                                    </L7p:ResourceInfo>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:TransformName stringValue=""/>
                                    <L7p:XsltVersion stringValue="1.0"/>
                                </L7p:XslTransformation>
                                <L7p:XslTransformation>
                                    <L7p:Direction intValue="-1"/>
                                    <L7p:OtherTargetMessageVariable stringValue="jdbcQuery.xmlResult"/>
                                    <L7p:ResourceInfo staticResourceInfo="included">
                                    <L7p:Document stringValueReference="inline"><![CDATA[<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <!-- identity transform for otherwise-unmatched nodes and attributes -->
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

  <!-- transform for field elements at any depth -->
  <xsl:template match="col">
    <xsl:element name="{@name}">
      <!-- transform this node's non-attribute children -->
      <xsl:apply-templates select="node()"/>
    </xsl:element>
  </xsl:template>

</xsl:stylesheet>]]></L7p:Document>
                                    </L7p:ResourceInfo>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:TransformName stringValue=""/>
                                    <L7p:XsltVersion stringValue="1.0"/>
                                </L7p:XslTransformation>
                                <L7p:JsonTransformation>
                                    <L7p:DestinationMessageTarget MessageTarget="included">
                                    <L7p:OtherTargetMessageVariable stringValue="jsonRsp"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:TargetModifiedByGateway booleanValue="true"/>
                                    </L7p:DestinationMessageTarget>
                                    <L7p:OtherTargetMessageVariable stringValue="jdbcQuery.xmlResult"/>
                                    <L7p:PrettyPrint booleanValue="true"/>
                                    <L7p:RootTagString stringValue=""/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:JsonTransformation>
                                <L7p:Regex>
                                    <L7p:AutoTarget booleanValue="false"/>
                                    <L7p:OtherTargetMessageVariable stringValue="jsonRsp"/>
                                    <L7p:Regex stringValue="null"/>
                                    <L7p:Replace booleanValue="true"/>
                                    <L7p:Replacement stringValue="&quot;&quot;"/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:Regex>
                                <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".row"/>
                                    <L7p:OtherTargetMessageVariable stringValue="jsonRsp"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="row"/>
                                </L7p:EvaluateJsonPathExpression>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue=""/>
                                    <L7p:VariableToSet stringValue="list"/>
                                </L7p:SetVariable>
                                <L7p:ForEachLoop L7p:Usage="Required"
                                    loopVariable="row.results" variablePrefix="aux">
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHthdXguY3VycmVudH0="/>
                                    <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                                    <L7p:DataType variableDataType="message"/>
                                    <L7p:VariableToSet stringValue="array"/>
                                    </L7p:SetVariable>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".subscription_id"/>
                                    <L7p:OtherTargetMessageVariable stringValue="array"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="subscription_id"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".state_timestamp"/>
                                    <L7p:OtherTargetMessageVariable stringValue="array"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="state_timestamp"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".tipo_plan"/>
                                    <L7p:OtherTargetMessageVariable stringValue="array"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="tipo_plan"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".batch_id"/>
                                    <L7p:OtherTargetMessageVariable stringValue="array"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="batch_id"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".resource_type"/>
                                    <L7p:OtherTargetMessageVariable stringValue="array"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="resource_type"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".resource_id"/>
                                    <L7p:OtherTargetMessageVariable stringValue="array"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="resource_id"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".state"/>
                                    <L7p:OtherTargetMessageVariable stringValue="array"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="state"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".billing_account_code"/>
                                    <L7p:OtherTargetMessageVariable stringValue="array"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="billing_account_code"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".document_id"/>
                                    <L7p:OtherTargetMessageVariable stringValue="array"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="document_id"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".customer_id"/>
                                    <L7p:OtherTargetMessageVariable stringValue="array"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="customer_id"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:EvaluateJsonPathExpression>
                                    <L7p:Expression stringValue=".document_type"/>
                                    <L7p:OtherTargetMessageVariable stringValue="array"/>
                                    <L7p:Target target="OTHER"/>
                                    <L7p:VariablePrefix stringValue="document_type"/>
                                    </L7p:EvaluateJsonPathExpression>
                                    <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="ew0KICAgIkluZGl2aWR1YWwiOiB7DQogICAgICAiSW5kaXZpZHVhbElkZW50aWZpY2F0aW9uIjogew0KICAgICAgICAgIm51bWJlciI6ICIke2RvY3VtZW50X2lkLnJlc3VsdH0iLA0KICAgICAgICAgInR5cGUiOiAiJHtkb2N1bWVudF90eXBlLnJlc3VsdH0iDQogICAgICB9DQogICB9LA0KICAgIk1pZ3JhdGlvbiI6IHsNCiAgICAgICJiYXRjaElEIjogIiR7YmF0Y2hfaWQucmVzdWx0fSINCiAgIH0sDQogICAiQmlsbGluZ0FjY291bnQiOiB7DQogICAgICAiYmlsbGluZ0FjY291bnRDb2RlIjogIiR7YmlsbGluZ19hY2NvdW50X2NvZGUucmVzdWx0fSIsDQogICAgICAic3RhdHVzQ2hhbmdlRGF0ZSI6ICIke3N0YXRlX3RpbWVzdGFtcC5yZXN1bHR9IiwNCiAgICAgICJleHRlcm5hbElEIjogIiR7YmlsbGluZ19hY2NvdW50X2NvZGUucmVzdWx0fSIsDQogICAgICAic3RhdHVzIjogIiR7c3RhdGUucmVzdWx0fSINCiAgIH0sDQogICAiQXNzZXQiOiB7DQogICAgICAiTVNJU0ROIjogew0KICAgICAgICAgIlNOIjogIiR7cmVzb3VyY2VfaWQucmVzdWx0fSINCiAgICAgIH0sDQogICAgICAiUmVzb3VyY2UiOiB7DQogICAgICAgICAiSUQiOiAiJHtyZXNvdXJjZV9pZC5yZXN1bHR9IiwNCiAgICAgICAgICJyZXNvdXJjZVR5cGUiOiAiJHtyZXNvdXJjZV90eXBlLnJlc3VsdH0iDQogICAgICB9LA0KICAgICAgIkNvbnRyYWN0Ijogew0KICAgICAgICAgInBsYW5UeXBlIjogIiR7dGlwb19wbGFuLnJlc3VsdH0iLA0KICAgICAgICAgIklEIjogIiR7Y3VzdG9tZXJfaWQucmVzdWx0fSINCiAgICAgIH0NCiAgIH0NCn0="/>
                                    <L7p:VariableToSet stringValue="list"/>
                                    </L7p:SetVariable>
                                    <L7p:ManipulateMultiValuedVariable>
                                    <L7p:SourceVariableName stringValue="list"/>
                                    <L7p:TargetVariableName stringValue="lista"/>
                                    </L7p:ManipulateMultiValuedVariable>
                                </L7p:ForEachLoop>
                                <L7p:Join>
                                    <L7p:InputVariable stringValue="lista"/>
                                    <L7p:OutputVariable stringValue="lista"/>
                                </L7p:Join>
                                <L7p:Regex>
                                    <L7p:AutoTarget booleanValue="false"/>
                                    <L7p:OtherTargetMessageVariable stringValue="lista"/>
                                    <L7p:Regex stringValue="&quot;&quot;"/>
                                    <L7p:Replace booleanValue="true"/>
                                    <L7p:Replacement stringValue="null"/>
                                    <L7p:Target target="OTHER"/>
                                </L7p:Regex>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="JHtyZXF1ZXN0LnRpbWUubG9jYWwueXl5eS1NTS1kZCdUJ0hIOm1tOnNzLlNTU30="/>
                                    <L7p:VariableToSet stringValue="responseTimestamp"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="MjAw"/>
                                    <L7p:VariableToSet stringValue="code"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="T0s="/>
                                    <L7p:VariableToSet stringValue="description"/>
                                </L7p:SetVariable>
                                <L7p:SetVariable>
                                    <L7p:Base64Expression stringValue="UHJvY2VzYW1pZW50byBjb25jbHXDrWRvIGV4aXRvc2FtZW50ZQ=="/>
                                    <L7p:VariableToSet stringValue="descriptionDetail"/>
                                </L7p:SetVariable>
                                <L7p:HardcodedResponse>
                                    <L7p:Base64ResponseBody stringValue="ewoicmVzdWx0Ijp7CgkidHJhbnNhY3Rpb25JZCI6IiR7cmVxdWVzdElkfSIsCgkiY29kZSI6IiR7Y29kZX0iLAoJImRlc2NyaXB0aW9uIjoiJHtkZXNjcmlwdGlvbn0iLAoJImRlc2NyaXB0aW9uRGV0YWlsIjoiJHtkZXNjcmlwdGlvbkRldGFpbH0iLAoJInJlc3BvbnNlVGltZXN0YW1wIjoiJHtyZXNwb25zZVRpbWVzdGFtcH0iCgl9LAoiQ3VzdG9tZXJBY2NvdW50IjogWwoke2xpc3RhfQpdCn0K"/>
                                    <L7p:ResponseContentType stringValue="application/json; charset=UTF-8"/>
                                </L7p:HardcodedResponse>
                            </wsp:All>
                        </wsp:OneOrMore>
                    </wsp:All>
                    <wsp:All wsp:Usage="Required">
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="NTAw"/>
                            <L7p:VariableToSet stringValue="code"/>
                        </L7p:SetVariable>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="RXJyb3IgaW50ZXJubyBlbiBlbCBzZXJ2aWRvcg=="/>
                            <L7p:VariableToSet stringValue="description"/>
                        </L7p:SetVariable>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="RXJyb3IgZW4gY29uZXhpb24gY29uIGJhc2UgZGUgZGF0b3M="/>
                            <L7p:VariableToSet stringValue="descriptionDetail"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:CustomLoggerSuffix stringValue="entel.api.syslog.error"/>
                            <L7p:Detail stringValue="REQUESTID: ${requestId} | EVENTID: ${eventId} | APIM ${service.name} Route Failed | IS REQUEST: ${queryRequest} | TIMESTAMP: ${request.time.local.yyyy-MM-dd'T'HH:mm:ss.SSS}"/>
                            <L7p:Level stringValue="WARNING"/>
                            <L7p:LoggingOnly booleanValue="true"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:Encapsulated>
                            <L7p:EncapsulatedAssertionConfigGuid stringValue="2873d7c1-bfb2-42b8-ab9a-35767965de80"/>
                            <L7p:EncapsulatedAssertionConfigName stringValue="API Portal Integration - Post Route"/>
                            <L7p:Parameters mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="portal.analytics.response.code"/>
                                    <L7p:value stringValue="500"/>
                                </L7p:entry>
                                <L7p:entry>
                                    <L7p:key stringValue="portal.analytics.routingTotalTime"/>
                                    <L7p:value stringValue="${assertion.latency.ms}"/>
                                </L7p:entry>
                            </L7p:Parameters>
                        </L7p:Encapsulated>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="NTAw"/>
                            <L7p:VariableToSet stringValue="httpCode"/>
                        </L7p:SetVariable>
                        <L7p:RaiseError/>
                    </wsp:All>
                    <L7p:assertionComment>
                        <L7p:Properties mapValue="included">
                            <L7p:entry>
                                <L7p:key stringValue="RIGHT.COMMENT"/>
                                <L7p:value stringValue="Logica"/>
                            </L7p:entry>
                        </L7p:Properties>
                    </L7p:assertionComment>
                </wsp:OneOrMore>
            </wsp:All>
        </wsp:OneOrMore>
    </wsp:All>
</wsp:Policy>