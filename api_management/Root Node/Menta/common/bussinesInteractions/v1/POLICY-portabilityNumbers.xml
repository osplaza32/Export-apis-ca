<?xml version="1.0" encoding="UTF-8"?>
<wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
    <wsp:All wsp:Usage="Required">
        <L7p:AuditDetailAssertion>
            <L7p:Detail stringValue="Policy Fragment: portabilityNumbers"/>
        </L7p:AuditDetailAssertion>
        <L7p:Include>
            <L7p:PolicyGuid stringValue="c30fccdf-e5b2-4d1f-96da-424a5407efde"/>
        </L7p:Include>
        <wsp:OneOrMore wsp:Usage="Required">
            <wsp:All wsp:Usage="Required">
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="JHtyZXF1ZXN0Lmh0dHAuaGVhZGVyLnJlcXVlc3RUaW1lc3RhbXB9"/>
                    <L7p:VariableToSet stringValue="Timestamp"/>
                </L7p:SetVariable>
                <L7p:Regex>
                    <L7p:AutoTarget booleanValue="false"/>
                    <L7p:OtherTargetMessageVariable stringValue="Timestamp"/>
                    <L7p:Regex stringValue="\-|T|\:|\."/>
                    <L7p:RegexVar stringValue="Timestamp"/>
                    <L7p:Replace booleanValue="true"/>
                    <L7p:Replacement stringValue=""/>
                    <L7p:Target target="OTHER"/>
                </L7p:Regex>
                <L7p:Regex>
                    <L7p:AutoTarget booleanValue="false"/>
                    <L7p:CaptureVar stringValue="Timestamp"/>
                    <L7p:OtherTargetMessageVariable stringValue="Timestamp"/>
                    <L7p:Regex stringValue="^................."/>
                    <L7p:Replacement stringValue=""/>
                    <L7p:Target target="OTHER"/>
                </L7p:Regex>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".canal"/>
                    <L7p:VariablePrefix stringValue="canal"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.numeroTelefonoPreactivo"/>
                    <L7p:VariablePrefix stringValue="numeroTelefonoPreactivo"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.numeroTelefonoPortabilidad"/>
                    <L7p:VariablePrefix stringValue="numeroTelefonoPortabilidad"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.indProteccionDatosPersonales"/>
                    <L7p:VariablePrefix stringValue="indProteccionDatosPersonales"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.numeroDocumento"/>
                    <L7p:VariablePrefix stringValue="indProteccionDatosPersonales"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.tipoDocumento"/>
                    <L7p:VariablePrefix stringValue="tipoDocumento"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.nombres"/>
                    <L7p:VariablePrefix stringValue="nombres"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.primerApellido"/>
                    <L7p:VariablePrefix stringValue="primerApellido"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.segundoApellido"/>
                    <L7p:VariablePrefix stringValue="segundoApellido"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.fechaNacimiento"/>
                    <L7p:VariablePrefix stringValue="fechaNacimiento"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.correo"/>
                    <L7p:VariablePrefix stringValue="correo"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.domicilio.direccionCompleta"/>
                    <L7p:VariablePrefix stringValue="direccionCompleta"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.domicilio.codigoDepartamento"/>
                    <L7p:VariablePrefix stringValue="codigoDepartamento"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.domicilio.codigoProvincia"/>
                    <L7p:VariablePrefix stringValue="codigoProvincia"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.domicilio.codigoDistrito"/>
                    <L7p:VariablePrefix stringValue="codigoDistrito"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.codigoAuditoriaBiometrico"/>
                    <L7p:VariablePrefix stringValue="codigoAuditoriaBiometrico"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.cliente.idClienteCRM"/>
                    <L7p:VariablePrefix stringValue="idClienteCRM"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.clienteBSCS.cusCode"/>
                    <L7p:VariablePrefix stringValue="cusCode"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.clienteBSCS.idClienteBSCS"/>
                    <L7p:VariablePrefix stringValue="idClienteBSCS"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.ordenProgramacionPortabilidad.idOrden"/>
                    <L7p:VariablePrefix stringValue="idOrden"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.numeroIncidente"/>
                    <L7p:VariablePrefix stringValue="numeroIncidente"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.centroPoblado"/>
                    <L7p:VariablePrefix stringValue="centroPoblado"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.codigoPlan"/>
                    <L7p:VariablePrefix stringValue="codigoPlan"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.resultadoBiometrico"/>
                    <L7p:VariablePrefix stringValue="operadorOrigen"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.tipoLineaOrigen"/>
                    <L7p:VariablePrefix stringValue="tipoLineaOrigen"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.codigoPlan"/>
                    <L7p:VariablePrefix stringValue="codigoPlan"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.incidenteProgramaconPortabilidad.codigoActivacionErrorBiometrico"/>
                    <L7p:VariablePrefix stringValue="codigoActivacionErrorBiometrico"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.incidenteProgramaconPortabilidad.idIncidenteBiometrico"/>
                    <L7p:VariablePrefix stringValue="idIncidenteBiometrico"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.incidenteProgramaconPortabilidad.codigoActivacionErrorPortabilidad"/>
                    <L7p:VariablePrefix stringValue="codigoActivacionErrorPortabilidad"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.incidenteProgramaconPortabilidad.idIncidenteConsultaPrevia"/>
                    <L7p:VariablePrefix stringValue="idIncidenteConsultaPrevia"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.telefonoprincipal.numeroTelefono"/>
                    <L7p:VariablePrefix stringValue="numeroTelefono"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".programarPortabilidadRequest.telefonoprincipal.codArea"/>
                    <L7p:VariablePrefix stringValue="codArea"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnYxPSJodHRwOi8vZW50ZWwuY29tLnBlL2VzYi9kYXRhL2dlbmVyaWNvL2VudGVsR2VuZXJpY0hlYWRlci92MS8iIHhtbG5zOnYxMT0iaHR0cDovL2VudGVsLmNvbS5wZS9lc2IvbWVzc2FnZS9HZXN0aW9uUmVuaWVjL3ZhbGlkYXJIdWVsbGFzL3YxLyI+DQogICA8c29hcGVudjpIZWFkZXI+DQogICAgICA8djE6aGVhZGVyUmVxdWVzdD4NCiAgICAgICAgIDx2MTpjYW5hbD4ke2NhbmFsLnJlc3VsdH08L3YxOmNhbmFsPg0KICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgPHYxOmlkQXBsaWNhY2lvbj4ke3JlcXVlc3QuaHR0cC5oZWFkZXIuYXBwbGljYXRpb25Db2RlfTwvdjE6aWRBcGxpY2FjaW9uPg0KICAgICAgICAgPHYxOmlkVHJhbnNhY2Npb25FU0I+JHtyZXF1ZXN0SWR9PC92MTppZFRyYW5zYWNjaW9uRVNCPg0KICAgICAgICAgPHYxOmlkVHJhbnNhY2Npb25OZWdvY2lvPiR7cmVxdWVzdElkfTwvdjE6aWRUcmFuc2FjY2lvbk5lZ29jaW8+DQogICAgICAgICA8IS0tT3B0aW9uYWw6LS0+DQogICAgICAgICA8djE6ZmVjaGFJbmljaW8+JHtyZXF1ZXN0Lmh0dHAuaGVhZGVyLnJlcXVlc3RUaW1lc3RhbXB9PC92MTpmZWNoYUluaWNpbz4NCiAgICAgICAgIDwhLS1PcHRpb25hbDotLT4NCiAgICAgICAgIDx2MTpub2RvQWRpY2lvbmFsPjwvdjE6bm9kb0FkaWNpb25hbD4NCiAgICAgIDwvdjE6aGVhZGVyUmVxdWVzdD4NCiAgIDwvc29hcGVudjpIZWFkZXI+DQogIDxzb2FwZW52OkJvZHk+DQogICAgPGJwZWw6cHJvZ3JhbWFyUG9ydGFiaWxpZGFkUmVxdWVzdD4NCiAgICAgICAgIDxicGVsOmNsaWVudGU+DQogICAgICAgICAgICA8IS0tT3B0aW9uYWw6LS0+DQogICAgICAgICAgICA8djExOnRpcG9Eb2N1bWVudG8+JHt0aXBvRG9jdW1lbnRvLnJlc3VsdH08L3YxMTp0aXBvRG9jdW1lbnRvPg0KICAgICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgICAgPHYxMTpub21icmVDb21wbGV0bz4ke25vbWJyZXMucmVzdWx0fTwvdjExOm5vbWJyZUNvbXBsZXRvPg0KICAgICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgICAgPHYxMTpwcmltZXJBcGVsbGlkbz4ke3ByaW1lckFwZWxsaWRvLnJlc3VsdH08L3YxMTpwcmltZXJBcGVsbGlkbz4NCiAgICAgICAgICAgIDwhLS1PcHRpb25hbDotLT4NCiAgICAgICAgICAgIDx2MTE6c2VndW5kb0FwZWxsaWRvPiR7c2VndW5kb0FwZWxsaWRvLnJlc3VsdH08L3YxMTpzZWd1bmRvQXBlbGxpZG8+DQogICAgICAgICAgICA8IS0tT3B0aW9uYWw6LS0+DQogICAgICAgICAgICA8djExOmNvcnJlbz4ke2NvcnJlby5yZXN1bHR9PC92MTE6Y29ycmVvPg0KICAgICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgICAgPHYxMjpkb21pY2lsaW8+DQogICAgICAgICAgICAgICA8IS0tT3B0aW9uYWw6LS0+DQogICAgICAgICAgICAgICA8djEyOmRpcmVjY2lvbkNvbXBsZXRhPiR7ZGlyZWNjaW9uQ29tcGxldGEucmVzdWx0fTwvdjEyOmRpcmVjY2lvbkNvbXBsZXRhPg0KICAgICAgICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgICAgICAgPHYxMjpjb2RpZ29EZXBhcnRhbWVudG8+JHtjb2RpZ29EZXBhcnRhbWVudG8ucmVzdWx0fTwvdjEyOmNvZGlnb0RlcGFydGFtZW50bz4NCiAgICAgICAgICAgICAgIDwhLS1PcHRpb25hbDotLT4NCiAgICAgICAgICAgICAgIDx2MTI6Y29kaWdvUHJvdmluY2lhPiR7Y29kaWdvUHJvdmluY2lhLnJlc3VsdH08L3YxMjpjb2RpZ29Qcm92aW5jaWE+DQogICAgICAgICAgICAgICA8IS0tT3B0aW9uYWw6LS0+DQogICAgICAgICAgICAgICA8djEyOmNvZGlnb0Rpc3RyaXRvPiR7Y29kaWdvRGlzdHJpdG8ucmVzdWx0fTwvdjEyOmNvZGlnb0Rpc3RyaXRvPg0KICAgICAgICAgICAgPC92MTI6ZG9taWNpbGlvPg0KICAgICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgICAgPHYxMzp0ZWxlZm9ub1ByaW5jaXBhbD4NCiAgICAgICAgICAgICAgIDwhLS1PcHRpb25hbDotLT4NCiAgICAgICAgICAgICAgIDx2MTM6bnVtZXJvVGVsZWZvbm8+JHtudW1lcm9UZWxlZm9uby5yZXN1bHR9PC92MTM6bnVtZXJvVGVsZWZvbm8+DQogICAgICAgICAgICAgICA8IS0tT3B0aW9uYWw6LS0+DQogICAgICAgICAgICAgICA8djEzOmNvZEFyZWE+JHtjb2RBcmVhLnJlc3VsdH08L3YxMzpjb2RBcmVhPg0KICAgICAgICAgICAgPC92MTM6dGVsZWZvbm9QcmluY2lwYWw+DQogICAgICAgICAgICA8IS0tT3B0aW9uYWw6LS0+DQogICAgICAgICAgICA8djE0OmNvZGlnb0F1ZGl0b3JpYUJpb21ldHJpY28+JHtjb2RpZ29BdWRpdG9yaWFCaW9tZXRyaWNvLnJlc3VsdH08L3YxNDpjb2RpZ29BdWRpdG9yaWFCaW9tZXRyaWNvPg0KICAgICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgICAgPHYxNDppZENsaWVudGVDUk0+JHtpZENsaWVudGVDUk0ucmVzdWx0fTwvdjE0OmlkQ2xpZW50ZUNSTT4NCiAgICAgICAgIDwvYnBlbDpjbGllbnRlPg0KICAgICAgICAgPGJwZWw6Y2xpZW50ZUJTQ1M+DQogICAgICAgICAgICA8IS0tT3B0aW9uYWw6LS0+DQogICAgICAgICAgICA8djE0OmN1c0NvZGU+JHtjdXNDb2RlLnJlc3VsdH08L3YxNDpjdXNDb2RlPg0KICAgICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgICAgPHYxNDppZENsaWVudGVCU0NTPiR7aWRDbGllbnRlQlNDUy5yZXN1bHR9PC92MTQ6aWRDbGllbnRlQlNDUz4NCiAgICAgICAgIDwvYnBlbDpjbGllbnRlQlNDUz4NCiAgICAgICAgIDxicGVsOm9yZGVuUHJvZ3JhbWFjaW9uUG9ydGFiaWxpZGFkPg0KICAgICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgICAgPHYxNTppZE9yZGVuPiR7Y29kaWdvQWN0aXZhY2lvbkVycm9yQmlvbWV0cmljby5yZXN1bHR9PC92MTU6aWRPcmRlbj4NCiAgICAgICAgIDwvYnBlbDpvcmRlblByb2dyYW1hY2lvblBvcnRhYmlsaWRhZD4NCiAgICAgICAgIDxicGVsOmluY2lkZW50ZVByb2dyYW1hY2lvblBvcnRhYmlsaWRhZD4JDQogICAgICAgICAgICA8IS0tT3B0aW9uYWw6LS0+DQogICAgICAgICAgICA8djE2OmNvZGlnb0FjdGl2YWNpb25FcnJvckJpb21ldHJpY28+JHtjb2RpZ29BY3RpdmFjaW9uRXJyb3JCaW9tZXRyaWNvLnJlc3VsdH08L3YxNjpjb2RpZ29BY3RpdmFjaW9uRXJyb3JCaW9tZXRyaWNvPg0KICAgICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgICAgPHYxNjpjb2RpZ29BY3RpdmFjaW9uRXJyb3JQb3J0YWJpbGlkYWQ+JHtjb2RpZ29BY3RpdmFjaW9uRXJyb3JQb3J0YWJpbGlkYWQucmVzdWx0fTwvdjE2OmNvZGlnb0FjdGl2YWNpb25FcnJvclBvcnRhYmlsaWRhZD4NCiAgICAgICAgICAgIDwhLS1PcHRpb25hbDotLT4NCiAgICAgICAgICAgIDx2MTY6aWRJbmNpZGVudGVDb25zdWx0YVByZXZpYT4ke2lkSW5jaWRlbnRlQ29uc3VsdGFQcmV2aWEucmVzdWx0fTwvdjE2OmlkSW5jaWRlbnRlQ29uc3VsdGFQcmV2aWE+DQogICAgICAgICAgICA8IS0tT3B0aW9uYWw6LS0+DQogICAgICAgICAgICA8djE2OmlkSW5jaWRlbnRlQmlvbWV0cmljbz4ke2lkSW5jaWRlbnRlQmlvbWV0cmljby5yZXN1bHR9PC92MTY6aWRJbmNpZGVudGVCaW9tZXRyaWNvPg0KICAgICAgICAgPC9icGVsOmluY2lkZW50ZVByb2dyYW1hY2lvblBvcnRhYmlsaWRhZD4NCiAgICAgICAgIDwhLS1PcHRpb25hbDotLT4NCiAgICAgICAgIDxicGVsOm9yaWdlbj4ke29wZXJhZG9yT3JpZ2VuLnJlc3VsdH08L2JwZWw6b3JpZ2VuPg0KICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgPGJwZWw6dGVsZWZvbm9QcmVhY3Rpdm8+JHtudW1lcm9UZWxlZm9ub1ByZWFjdGl2by5yZXN1bHR9PC9icGVsOnRlbGVmb25vUHJlYWN0aXZvPg0KICAgICAgICAgPCEtLU9wdGlvbmFsOi0tPg0KICAgICAgICAgPGJwZWw6Y2VudHJvUG9ibGFkbz4ke2NlbnRyb1BvYmxhZG8ucmVzdWx0fTwvYnBlbDpjZW50cm9Qb2JsYWRvPg0KICAgICAgPC9icGVsOnByb2dyYW1hclBvcnRhYmlsaWRhZFJlcXVlc3Q+DQoNCiAgIDwvc29hcGVudjpCb2R5Pg0KICAgICANCjwvc29hcGVudjpFbnZlbG9wZT4="/>
                    <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                    <L7p:DataType variableDataType="message"/>
                    <L7p:VariableToSet stringValue="message"/>
                </L7p:SetVariable>
                <L7p:AuditDetailAssertion>
                    <L7p:CustomLoggerSuffix stringValue="entel.api.syslog"/>
                    <L7p:Detail stringValue="IDTRANSACTION: ${requestId}  REQUEST BACKEND: ${message.mainpart} "/>
                    <L7p:LoggingOnly booleanValue="true"/>
                </L7p:AuditDetailAssertion>
                <L7p:HttpRoutingAssertion>
                    <L7p:FailOnErrorStatus booleanValue="false"/>
                    <L7p:HttpMethod httpMethod="POST"/>
                    <L7p:PassThroughSoapFaults booleanValue="false"/>
                    <L7p:ProtectedServiceUrl stringValue="http://${gateway.osb.hostname}/soa-infra/services/mayoristas_portabilidad/ProgramacionPortablidadMayoristas/bpel_programacionportablidadmayoristas_client_ep?WSDL"/>
                    <L7p:ProxyPassword stringValueNull="null"/>
                    <L7p:ProxyUsername stringValueNull="null"/>
                    <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                        <L7p:ForwardAll booleanValue="true"/>
                        <L7p:Rules httpPassthroughRules="included">
                            <L7p:item httpPassthroughRule="included">
                                <L7p:Name stringValue="Cookie"/>
                            </L7p:item>
                            <L7p:item httpPassthroughRule="included">
                                <L7p:Name stringValue="SOAPAction"/>
                            </L7p:item>
                        </L7p:Rules>
                    </L7p:RequestHeaderRules>
                    <L7p:RequestMsgSrc stringValue="message"/>
                    <L7p:RequestParamRules httpPassthroughRuleSet="included">
                        <L7p:ForwardAll booleanValue="true"/>
                        <L7p:Rules httpPassthroughRules="included"/>
                    </L7p:RequestParamRules>
                    <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                        <L7p:ForwardAll booleanValue="true"/>
                        <L7p:Rules httpPassthroughRules="included">
                            <L7p:item httpPassthroughRule="included">
                                <L7p:Name stringValue="Set-Cookie"/>
                            </L7p:item>
                        </L7p:Rules>
                    </L7p:ResponseHeaderRules>
                    <L7p:ResponseMsgDest stringValue="serviceResponse"/>
                    <L7p:SamlAssertionVersion intValue="2"/>
                </L7p:HttpRoutingAssertion>
                <L7p:AuditDetailAssertion>
                    <L7p:CustomLoggerSuffix stringValue="entel.api.syslog"/>
                    <L7p:Detail stringValue="IDTRANSACTION: ${requestId} BACKEND: ${httpRouting.url} LATENCY: ${httpRouting.latency} ms REASON CODE: ${httpRouting.reasonCode} RESPONSEBACKEND: ${response.mainpart} "/>
                    <L7p:LoggingOnly booleanValue="true"/>
                </L7p:AuditDetailAssertion>
                <L7p:ComparisonAssertion>
                    <L7p:AssertionComment assertionComment="included">
                        <L7p:Properties mapValue="included">
                            <L7p:entry>
                                <L7p:key stringValue="RIGHT.COMMENT"/>
                                <L7p:value stringValue="Evalua si el estado de la respuesta es OK"/>
                            </L7p:entry>
                        </L7p:Properties>
                    </L7p:AssertionComment>
                    <L7p:CaseSensitive booleanValue="false"/>
                    <L7p:Expression1 stringValue="${httpRouting.reasonCode}"/>
                    <L7p:Expression2 stringValue="200"/>
                    <L7p:Predicates predicates="included">
                        <L7p:item binary="included">
                            <L7p:CaseSensitive booleanValue="false"/>
                            <L7p:RightValue stringValue="200"/>
                        </L7p:item>
                    </L7p:Predicates>
                </L7p:ComparisonAssertion>
                <wsp:OneOrMore wsp:Usage="Required">
                    <wsp:All wsp:Usage="Required">
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:AssertionComment assertionComment="included">
                                <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="Extrae el Body"/>
                                    </L7p:entry>
                                </L7p:Properties>
                            </L7p:AssertionComment>
                            <L7p:Enabled booleanValue="false"/>
                            <L7p:Expression stringValue="$.Create_RequestPayment_RSP.Body"/>
                            <L7p:Target target="RESPONSE"/>
                            <L7p:VariablePrefix stringValue="resultBody"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:Regex>
                            <L7p:AssertionComment assertionComment="included">
                                <L7p:Properties mapValue="included">
                                    <L7p:entry>
                                    <L7p:key stringValue="RIGHT.COMMENT"/>
                                    <L7p:value stringValue="Arregla el Body"/>
                                    </L7p:entry>
                                </L7p:Properties>
                            </L7p:AssertionComment>
                            <L7p:AutoTarget booleanValue="false"/>
                            <L7p:Enabled booleanValue="false"/>
                            <L7p:OtherTargetMessageVariable stringValue="resultBody.result"/>
                            <L7p:Regex stringValue="^\{|\}$"/>
                            <L7p:Replace booleanValue="true"/>
                            <L7p:Replacement stringValue=""/>
                            <L7p:Target target="OTHER"/>
                        </L7p:Regex>
                        <L7p:Include>
                            <L7p:PolicyGuid stringValue="6ca99a73-dddf-4d5c-b579-1b8ff18635d6"/>
                        </L7p:Include>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="JHtzZXJ2aWNlUmVzcG9uc2UubWFpbnBhcnR9"/>
                            <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="responseBackend"/>
                        </L7p:SetVariable>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="JHtyZXF1ZXN0LnRpbWUubG9jYWwueXl5eS1NTS1kZCdUJ0hIOm1tOnNzLlNTU30="/>
                            <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="responseTimeStamp"/>
                        </L7p:SetVariable>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue="validateNumberResponse.responseStatus.estado"/>
                            <L7p:OtherTargetMessageVariable stringValue="responseBackend"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="estado"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".validateNumberResponse.responseStatus.codigoRespuesta"/>
                            <L7p:OtherTargetMessageVariable stringValue="responseBackend"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="codigoRespuesta"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".validateNumberResponse.responseStatus.descripcionRespuesta"/>
                            <L7p:OtherTargetMessageVariable stringValue="responseBackend"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="descripcionRespuesta"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".validateNumberResponse.responseStatus.ubicacionError"/>
                            <L7p:OtherTargetMessageVariable stringValue="responseBackend"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="descripcionRespuesta"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".validateNumberResponse.responseStatus.fecha"/>
                            <L7p:OtherTargetMessageVariable stringValue="responseBackend"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="ubicacionError"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".validateNumberResponse.responseStatus.errorOrigen"/>
                            <L7p:OtherTargetMessageVariable stringValue="responseBackend"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="errorOrigen"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".validateNumberResponse.responseData.strStatusPort"/>
                            <L7p:OtherTargetMessageVariable stringValue="responseBackend"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="strStatusPort"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".validateNumberResponse.responseData.strFechaPort"/>
                            <L7p:OtherTargetMessageVariable stringValue="responseBackend"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="strFechaPort"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".validateNumberResponse.responseData.strIdCedente"/>
                            <L7p:OtherTargetMessageVariable stringValue="responseBackend"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="strIdCedente"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".validateNumberResponse.responseData.strIdReceptor"/>
                            <L7p:OtherTargetMessageVariable stringValue="responseBackend"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="strIdReceptor"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".validateNumberResponse.responseData.strDescripcionPort"/>
                            <L7p:OtherTargetMessageVariable stringValue="responseBackend"/>
                            <L7p:Target target="OTHER"/>
                            <L7p:VariablePrefix stringValue="strDescripcionPort"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="ew0KCSJyZXN1bHQiOiB7DQoJCSJ0cmFuc2FjdGlvbklkIjogIiR7cmVxdWVzdElkfSIsDQoJCSJjb2RlIjogIjIwMCIsDQoJCSJkZXNjcmlwdGlvbiI6ICJPSyIsDQoJCSJkZXNjcmlwdGlvbkRldGFpbCI6ICJQcm9jZXNhbWllbnRvIGNvbmNsdcOtZG8gZXhpdG9zYW1lbnRlIiwNCgkJInJlc3BvbnNlVGltZXN0YW1wIjogIiR7cmVzcG9uc2VUaW1lc3RhbXB9Ig0KCX0sDQoNCgkiYm9keSI6IHsNCgkJInJlc3BvbnNlU3RhdHVzIjogew0KCQkJImVzdGFkbyI6ICIke2VzdGFkby5yZXN1bHR9IiwNCgkJCSJjb2RpZ29SZXNwdWVzdGEiOiAiJHtjb2RpZ29SZXNwdWVzdGEucmVzdWx0fSIsDQoJCQkiZGVzY3JpcGNpb25SZXNwdWVzdGEiOiAiJHtkZXNjcmlwY2lvblJlc3B1ZXN0YS5yZXN1bHR9IiwNCgkJCSJ1YmljYWNpb25FcnJvciI6ICIke3ViaWNhY2lvbkVycm9yLnJlc3VsdH0iLA0KCQkJImZlY2hhIjogIiR7ZmVjaGEucmVzdWx0fSIsDQoJCQkiZXJyb3JPcmlnZW4iOiAiJHtlcnJvck9yaWdlbi5yZXN1bHR9Ig0KCQl9LA0KCQkicmVzcG9uc2VEYXRhIjogew0KCQkJInN0clN0YXR1c1BvcnQiOiAiJHtzdHJTdGF0dXNQb3J0LnJlc3VsdH0iLA0KCQkJInN0ckZlY2hhUG9ydCI6ICIke3N0ckZlY2hhUG9ydC5yZXN1bHR9IiwNCgkJCSJzdHJJZENlZGVudGUiOiAiJHtzdHJJZENlZGVudGUucmVzdWx0fSIsDQoJCQkic3RySWRSZWNlcHRvciI6ICIke3N0cklkUmVjZXB0b3IucmVzdWx0fSIsDQoJCQkic3RyRGVzY3JpcGNpb25Qb3J0IjogIiR7c3RyRGVzY3JpcGNpb25Qb3J0LnJlc3VsdH0iDQoJCX0NCg0KCX0NCg0KfQ=="/>
                            <L7p:VariableToSet stringValue="serviceResponse"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:CustomLoggerSuffix stringValue="entel.api.syslog"/>
                            <L7p:Detail stringValue="IDTRANSACTION: ${requestId}  RESPONSE GW: ${serviceResponse} "/>
                            <L7p:LoggingOnly booleanValue="true"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:HardcodedResponse>
                            <L7p:Base64ResponseBody stringValue="JHtzZXJ2aWNlUmVzcG9uc2V9CgoK"/>
                            <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                        </L7p:HardcodedResponse>
                    </wsp:All>
                    <wsp:All wsp:Usage="Required">
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="ew0KInJlc3VsdCI6ew0KCSJ0cmFuc2FjdGlvbklkIjoiJHtyZXF1ZXN0SWR9IiwNCgkiY29kZSI6IjIwMCIsDQoJImRlc2NyaXB0aW9uIjoiT0siLA0KCSJkZXNjcmlwdGlvbkRldGFpbCI6IlByb2Nlc2FtaWVudG8gY29uY2x1w61kbyBleGl0b3NhbWVudGUiLA0KCSJyZXNwb25zZVRpbWVzdGFtcCI6IiR7cmVzcG9uc2VUaW1lc3RhbXB9Ig0KCX0NCn0="/>
                            <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="serviceResponse"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:CustomLoggerSuffix stringValue="entel.api.syslog"/>
                            <L7p:Detail stringValue="IDTRANSACTION: ${requestId}  RESPONSE GW: ${serviceResponse} "/>
                            <L7p:LoggingOnly booleanValue="true"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:HardcodedResponse>
                            <L7p:Base64ResponseBody stringValue="JHtzZXJ2aWNlUmVzcG9uc2V9CgoK"/>
                            <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                        </L7p:HardcodedResponse>
                    </wsp:All>
                </wsp:OneOrMore>
            </wsp:All>
            <wsp:All wsp:Usage="Required">
                <L7p:Encapsulated>
                    <L7p:EncapsulatedAssertionConfigGuid stringValue="14295f18-da19-4f0e-9643-a8c30b3544dc"/>
                    <L7p:EncapsulatedAssertionConfigName stringValue="CodeStatus"/>
                </L7p:Encapsulated>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".SourceError.description"/>
                    <L7p:Target target="RESPONSE"/>
                    <L7p:VariablePrefix stringValue="descriptionDetail"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="JHtkZXNjcmlwdGlvbkRldGFpbC5yZXN1bHR9"/>
                    <L7p:VariableToSet stringValue="descriptionDetail"/>
                </L7p:SetVariable>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".SourceError.code"/>
                    <L7p:Target target="RESPONSE"/>
                    <L7p:VariablePrefix stringValue="codeSource"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="JHtjb2RlU291cmNlLnJlc3VsdH0="/>
                    <L7p:VariableToSet stringValue="codeSource"/>
                </L7p:SetVariable>
                <L7p:AuditDetailAssertion>
                    <L7p:CustomLoggerSuffix stringValue="entel.api.syslog"/>
                    <L7p:Detail stringValue="IDTRANSACTION: ${requestId} CODE: ${code} DESCRIPTION: ${description} DETAIL: ${descriptionDetail}"/>
                    <L7p:LoggingOnly booleanValue="true"/>
                </L7p:AuditDetailAssertion>
                <L7p:CustomizeErrorResponse>
                    <L7p:Content stringValueReference="inline"><![CDATA[{
"result":{
	"transactionId":"${requestId}",
	"code":"${httpRouting.ReasonCode}",
	"description":"${codeDescription}",
	"descriptionDetail":"${codeSource} - ${descriptionDetail}",
	"responseTimestamp":"${responseTimestamp}"
	}
}]]></L7p:Content>
                    <L7p:ContentType stringValue="application/json; charset=UTF-8"/>
                    <L7p:ExtraHeaders nameValuePairArray="included"/>
                    <L7p:HttpStatus stringValue="${httpRouting.reasonCode}"/>
                </L7p:CustomizeErrorResponse>
                <L7p:RaiseError/>
            </wsp:All>
            <wsp:All wsp:Usage="Required">
                <L7p:Include>
                    <L7p:PolicyGuid stringValue="1b3f18a3-5e88-4cae-9fae-44b459727ac1"/>
                </L7p:Include>
            </wsp:All>
            <L7p:assertionComment>
                <L7p:Properties mapValue="included">
                    <L7p:entry>
                        <L7p:key stringValue="RIGHT.COMMENT"/>
                        <L7p:value stringValue="Logica"/>
                    </L7p:entry>
                </L7p:Properties>
            </L7p:assertionComment>
        </wsp:OneOrMore>
    </wsp:All>
</wsp:Policy>