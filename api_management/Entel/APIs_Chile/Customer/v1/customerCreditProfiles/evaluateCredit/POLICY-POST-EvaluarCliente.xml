<?xml version="1.0" encoding="UTF-8"?>
<wsp:Policy xmlns:L7p="http://www.layer7tech.com/ws/policy" xmlns:wsp="http://schemas.xmlsoap.org/ws/2002/12/policy">
    <wsp:All wsp:Usage="Required">
        <wsp:OneOrMore wsp:Usage="Required">
            <wsp:All wsp:Usage="Required">
                <wsp:All wsp:Usage="Required">
                    <wsp:All wsp:Usage="Required">
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".IncidentId"/>
                            <L7p:VariablePrefix stringValue="numeroIncidente"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".PortabilityPhoneNumber"/>
                            <L7p:VariablePrefix stringValue="numeroTelefonoAPortar"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".OperatorOrigin"/>
                            <L7p:VariablePrefix stringValue="idOperadorOrigen"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".ModeOrigin"/>
                            <L7p:VariablePrefix stringValue="modalidadOrigen"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".DocumentType"/>
                            <L7p:VariablePrefix stringValue="tipoDocumento"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:EvaluateJsonPathExpression>
                            <L7p:Expression stringValue=".DocumentNumber"/>
                            <L7p:VariablePrefix stringValue="numeroDocumento"/>
                        </L7p:EvaluateJsonPathExpression>
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="PHNvYXBlbnY6RW52ZWxvcGUgeG1sbnM6c29hcGVudj0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9lbnZlbG9wZS8iIHhtbG5zOnYxPSJodHRwOi8vZW50ZWwuY29tLnBlL3NvYS9kYXRhL2dlbmVyaWNvL2VudGVsR2VuZXJpY0hlYWRlci92MS8iIHhtbG5zOmJwZWw9Imh0dHA6Ly94bWxucy5vcmFjbGUuY29tL0V2YWx1YWNpb25DbGllbnRlQXBwX3YyL0V2YWx1YWNpb25DbGllbnRlTWF5b3Jpc3RhX3YyL0JQRUxfRXZhbHVhY2lvbkNsaWVudGVNYXlvcmlzdGFfdjIiPg0KICAgPHNvYXBlbnY6SGVhZGVyPg0KICAgICAgPHYxOmhlYWRlclJlcXVlc3Q+DQogICAgICAgICA8djE6Y2FuYWw+TUFZT1JJU1RBUzwvdjE6Y2FuYWw+DQogICAgICAgICA8djE6aWRBcGxpY2FjaW9uPiR7cmVxdWVzdC5odHRwLmhlYWRlci5hcHBsaWNhdGlvbkNvZGV9PC92MTppZEFwbGljYWNpb24+DQogICAgICAgICA8djE6dXN1YXJpbz4ke3JlcXVlc3QuaHR0cC5oZWFkZXIuY29uc3VtZXJJZH08L3YxOnVzdWFyaW8+DQogICAgICAgICA8djE6aWRUcmFuc2FjY2lvbkVTQj4ke3JlcXVlc3RJZH08L3YxOmlkVHJhbnNhY2Npb25FU0I+DQogICAgICAgICA8djE6aWRUcmFuc2FjY2lvbk5lZ29jaW8+JHtyZXF1ZXN0SWR9PC92MTppZFRyYW5zYWNjaW9uTmVnb2Npbz4NCiAgICAgICAgIDx2MTpmZWNoYUluaWNpbz4ke3JlcXVlc3QuaHR0cC5oZWFkZXIucmVxdWVzdFRpbWVzdGFtcH08L3YxOmZlY2hhSW5pY2lvPg0KICAgICAgICAgPHYxOm5vZG9BZGljaW9uYWw+PC92MTpub2RvQWRpY2lvbmFsPg0KICAgICAgPC92MTpoZWFkZXJSZXF1ZXN0Pg0KICAgPC9zb2FwZW52OkhlYWRlcj4NCiAgIDxzb2FwZW52OkJvZHk+DQogICAgICA8YnBlbDpldmFsdWFjaW9uQ2xpZW50ZT4NCiAgICAgICAgIDxicGVsOm51bWVyb0luY2lkZW50ZT4ke251bWVyb0luY2lkZW50ZS5yZXN1bHR9PC9icGVsOm51bWVyb0luY2lkZW50ZT4NCiAgICAgICAgIDxicGVsOm51bWVyb1RlbGVmb25vQVBvcnRhcj4ke251bWVyb1RlbGVmb25vQVBvcnRhci5yZXN1bHR9PC9icGVsOm51bWVyb1RlbGVmb25vQVBvcnRhcj4NCiAgICAgICAgIDxicGVsOmlkT3BlcmFkb3JPcmlnZW4+JHtpZE9wZXJhZG9yT3JpZ2VuLnJlc3VsdH08L2JwZWw6aWRPcGVyYWRvck9yaWdlbj4NCiAgICAgICAgIDxicGVsOm1vZGFsaWRhZE9yaWdlbj4ke21vZGFsaWRhZE9yaWdlbi5yZXN1bHR9PC9icGVsOm1vZGFsaWRhZE9yaWdlbj4NCiAgICAgICAgIDxicGVsOnRpcG9Eb2N1bWVudG8+JHt0aXBvRG9jdW1lbnRvLnJlc3VsdH08L2JwZWw6dGlwb0RvY3VtZW50bz4NCiAgICAgICAgIDxicGVsOm51bWVyb0RvY3VtZW50bz4ke251bWVyb0RvY3VtZW50by5yZXN1bHR9PC9icGVsOm51bWVyb0RvY3VtZW50bz4NCiAgICAgIDwvYnBlbDpldmFsdWFjaW9uQ2xpZW50ZT4NCiAgIDwvc29hcGVudjpCb2R5Pg0KPC9zb2FwZW52OkVudmVsb3BlPg=="/>
                            <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="requestGetCalleWS"/>
                        </L7p:SetVariable>
                        <L7p:assertionComment>
                            <L7p:Properties mapValue="included">
                                <L7p:entry>
                                    <L7p:key stringValue="LEFT.COMMENT"/>
                                    <L7p:value stringValue="Variables"/>
                                </L7p:entry>
                            </L7p:Properties>
                        </L7p:assertionComment>
                    </wsp:All>
                    <L7p:HttpRoutingAssertion>
                        <L7p:ConnectionTimeout stringValue="240000"/>
                        <L7p:FailOnErrorStatus booleanValue="false"/>
                        <L7p:HttpMethod httpMethod="POST"/>
                        <L7p:ProtectedServiceUrl stringValue="http://${gateway.appMayoristas.legacy.soa12.hostname}/soa-infra/services/mayoristas_validacion/EvaluacionClienteMayorista_v2/bpel_evaluacionclientemayorista_v2_client_ep_2_ep"/>
                        <L7p:ProxyPassword stringValueNull="null"/>
                        <L7p:ProxyUsername stringValueNull="null"/>
                        <L7p:RequestHeaderRules httpPassthroughRuleSet="included">
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Cookie"/>
                                </L7p:item>
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="SOAPAction"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:RequestHeaderRules>
                        <L7p:RequestMsgSrc stringValue="requestGetCalleWS"/>
                        <L7p:RequestParamRules httpPassthroughRuleSet="included">
                            <L7p:ForwardAll booleanValue="true"/>
                            <L7p:Rules httpPassthroughRules="included"/>
                        </L7p:RequestParamRules>
                        <L7p:ResponseHeaderRules httpPassthroughRuleSet="included">
                            <L7p:Rules httpPassthroughRules="included">
                                <L7p:item httpPassthroughRule="included">
                                    <L7p:Name stringValue="Set-Cookie"/>
                                </L7p:item>
                            </L7p:Rules>
                        </L7p:ResponseHeaderRules>
                        <L7p:ResponseMsgDest stringValue="responseGetCalleWS"/>
                        <L7p:SamlAssertionVersion intValue="2"/>
                        <L7p:UseKeepAlives booleanValue="false"/>
                    </L7p:HttpRoutingAssertion>
                    <L7p:SetVariable>
                        <L7p:Base64Expression stringValue="JHtyZXNwb25zZS5odHRwLnN0YXR1c30="/>
                        <L7p:VariableToSet stringValue="portal.analytics.response.code"/>
                    </L7p:SetVariable>
                </wsp:All>
                <wsp:OneOrMore wsp:Usage="Required">
                    <wsp:All wsp:Usage="Required">
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="ew0KInJlc3VsdCI6ew0KCSJ0cmFuc2FjdGlvbklkIjoiJHtyZXF1ZXN0SWR9IiwNCgkiY29kZSI6IjIwMCIsDQoJImRlc2NyaXB0aW9uIjoiT0siLA0KCSJkZXNjcmlwdGlvbkRldGFpbCI6IlByb2Nlc2FtaWVudG8gY29uY2x1w61kbyBleGl0b3NhbWVudGUiLA0KCSJyZXNwb25zZVRpbWVzdGFtcCI6IiR7cmVzcG9uc2VUaW1lc3RhbXB9Ig0KCX0NCn0="/>
                            <L7p:ContentType stringValue="application/json; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="response"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:CustomLoggerSuffix stringValue="entel.api.syslog"/>
                            <L7p:Detail stringValue="IDTRANSACTION: ${requestId}  RESPONSE GW: ${serviceResponse} "/>
                            <L7p:LoggingOnly booleanValue="true"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:HardcodedResponse>
                            <L7p:Base64ResponseBody stringValue="JHtzZXJ2aWNlUmVzcG9uc2V9CgoK"/>
                            <L7p:Enabled booleanValue="false"/>
                            <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                        </L7p:HardcodedResponse>
                    </wsp:All>
                    <wsp:All wsp:Usage="Required">
                        <L7p:SetVariable>
                            <L7p:Base64Expression stringValue="ew0KInJlc3VsdCI6ew0KCSJ0cmFuc2FjdGlvbklkIjoiJHtyZXF1ZXN0SWR9IiwNCgkiY29kZSI6IjIwMCIsDQoJImRlc2NyaXB0aW9uIjoiT0siLA0KCSJkZXNjcmlwdGlvbkRldGFpbCI6IlByb2Nlc2FtaWVudG8gY29uY2x1w61kbyBleGl0b3NhbWVudGUiLA0KCSJyZXNwb25zZVRpbWVzdGFtcCI6IiR7cmVzcG9uc2VUaW1lc3RhbXB9Ig0KCX0NCn0="/>
                            <L7p:ContentType stringValue="text/xml; charset=utf-8"/>
                            <L7p:DataType variableDataType="message"/>
                            <L7p:VariableToSet stringValue="response"/>
                        </L7p:SetVariable>
                        <L7p:AuditDetailAssertion>
                            <L7p:CustomLoggerSuffix stringValue="entel.api.syslog"/>
                            <L7p:Detail stringValue="IDTRANSACTION: ${requestId}  RESPONSE GW: ${serviceResponse} "/>
                            <L7p:LoggingOnly booleanValue="true"/>
                        </L7p:AuditDetailAssertion>
                        <L7p:HardcodedResponse>
                            <L7p:Base64ResponseBody stringValue="JHtzZXJ2aWNlUmVzcG9uc2V9CgoK"/>
                            <L7p:Enabled booleanValue="false"/>
                            <L7p:ResponseContentType stringValue="application/json; charset=utf-8"/>
                        </L7p:HardcodedResponse>
                    </wsp:All>
                </wsp:OneOrMore>
            </wsp:All>
            <wsp:All wsp:Usage="Required">
                <L7p:Encapsulated>
                    <L7p:EncapsulatedAssertionConfigGuid stringValue="14295f18-da19-4f0e-9643-a8c30b3544dc"/>
                    <L7p:EncapsulatedAssertionConfigName stringValue="CodeStatus"/>
                </L7p:Encapsulated>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".SourceError.description"/>
                    <L7p:Target target="RESPONSE"/>
                    <L7p:VariablePrefix stringValue="descriptionDetail"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="JHtkZXNjcmlwdGlvbkRldGFpbC5yZXN1bHR9"/>
                    <L7p:VariableToSet stringValue="descriptionDetail"/>
                </L7p:SetVariable>
                <L7p:EvaluateJsonPathExpression>
                    <L7p:Expression stringValue=".SourceError.code"/>
                    <L7p:Target target="RESPONSE"/>
                    <L7p:VariablePrefix stringValue="codeSource"/>
                </L7p:EvaluateJsonPathExpression>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="JHtjb2RlU291cmNlLnJlc3VsdH0="/>
                    <L7p:VariableToSet stringValue="codeSource"/>
                </L7p:SetVariable>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="JHtjb2RlRGVzY3JpcHRpb259"/>
                    <L7p:VariableToSet stringValue="description"/>
                </L7p:SetVariable>
                <L7p:SetVariable>
                    <L7p:Base64Expression stringValue="JHtodHRwUm91dGluZy5SZWFzb25Db2RlfQ=="/>
                    <L7p:VariableToSet stringValue="code"/>
                </L7p:SetVariable>
                <L7p:AuditDetailAssertion>
                    <L7p:CustomLoggerSuffix stringValue="entel.api.syslog"/>
                    <L7p:Detail stringValue="IDTRANSACTION: ${requestId} CODE: ${code} DESCRIPTION: ${description} DETAIL: ${descriptionDetail}"/>
                    <L7p:LoggingOnly booleanValue="true"/>
                </L7p:AuditDetailAssertion>
                <L7p:RaiseError/>
            </wsp:All>
            <wsp:All wsp:Usage="Required">
                <L7p:Include>
                    <L7p:PolicyGuid stringValue="4149a5c9-f2a5-45cf-ac36-02202909301f"/>
                </L7p:Include>
            </wsp:All>
            <L7p:assertionComment>
                <L7p:Properties mapValue="included">
                    <L7p:entry>
                        <L7p:key stringValue="RIGHT.COMMENT"/>
                        <L7p:value stringValue="Logica"/>
                    </L7p:entry>
                </L7p:Properties>
            </L7p:assertionComment>
        </wsp:OneOrMore>
    </wsp:All>
</wsp:Policy>